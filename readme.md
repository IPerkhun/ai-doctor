# ü©∫ **AI-–î–û–ö–¢–û–†: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ MVP**

## üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å Telegram-–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ –≤–∏–¥–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∂–∞–ª–æ–±—ã, –±–æ—Ç —É—Ç–æ—á–Ω—è–µ—Ç 1‚Äì2 –≤–æ–ø—Ä–æ—Å–∞ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é (`final_recommendation`) —Å –¥–∏–∞–≥–Ω–æ–∑–∞–º–∏, –≤—Ä–∞—á–æ–º, –∞–Ω–∞–ª–∏–∑–∞–º–∏ –∏ —Ç–µ—Ä–∞–ø–∏–µ–π.

---

## üîß 1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

## üì¶ 2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
ai_doctor/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ agent.py             # LangGraph –∏–ª–∏ LangChain –∞–≥–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ prompts.py           # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ models.py            # Pydantic –º–æ–¥–µ–ª–∏ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞, —Å–µ—Å—Å–∏—è –∏ —Ç.–¥.)
‚îÇ   ‚îú‚îÄ‚îÄ state_manager.py     # FSM –∏–ª–∏ LangGraph graph
‚îÇ   ‚îú‚îÄ‚îÄ storage.py           # SessionStore (–ø–∞–º—è—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ utils.py             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ telegram/
‚îÇ   ‚îú‚îÄ‚îÄ bot.py               # Telegram –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ handlers.py          # Callback'–∏, –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–æ–∫
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è 3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**

### 3.1 Telegram-–±–æ—Ç

* `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
* –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä"
* –ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∂–∞–ª–æ–±—ã
* –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –∑–∞–¥–∞—ë—Ç 1-–π –∏ 2-–π —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
* –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ

### 3.2 LangGraph FSM

–°–æ—Å—Ç–æ—è–Ω–∏—è:

1. `start`: –ø–æ–ª—É—á–∏—Ç—å –∂–∞–ª–æ–±—É
2. `check_info`: —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ –¥–∞–Ω–Ω—ã—Ö?
3. `ask_q1`: –∑–∞–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
4. `ask_q2`: –∑–∞–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
5. `generate_final`: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JSON
6. `end`: –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é

–ü–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–∞ –ª–æ–≥–∏–∫–µ "–µ—Å—Ç—å –ª–∏ —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?"

### 3.3 OpenAI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

* –ú–æ–¥–µ–ª—å: `gpt-4o`
* –û–¥–∏–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–±–æ —á–µ—Ä–µ–∑ LangChain, –ª–∏–±–æ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ OpenAI SDK

### 3.4 Session Storage

–•—Ä–∞–Ω–∏—Ç—Å—è:

* `user_id`
* —Ç–µ–∫—É—â–∏–π `state`
* `history` —Å–æ–æ–±—â–µ–Ω–∏–π
* `q1`, `q2`, `answers`
* `final_recommendation`

---

## üßæ 4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "diagnosis": ["–î–∏–∞–≥–Ω–æ–∑ 1", "–î–∏–∞–≥–Ω–æ–∑ 2"],
  "specialist": "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç",
  "tests": {
    "lab": ["–ê–Ω–∞–ª–∏–∑ 1", "–ê–Ω–∞–ª–∏–∑ 2", "–ê–Ω–∞–ª–∏–∑ 3", "–ê–Ω–∞–ª–∏–∑ 4"],
    "instrumental": ["–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ 1", "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ 2"]
  },
  "therapy": "–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π —Ç–µ—Ä–∞–ø–∏–∏"
}
```

---

## üîú 5. **–ü–ª–∞–Ω –ø–æ —ç—Ç–∞–ø–∞–º**

| –≠—Ç–∞–ø | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          | –ó–∞–¥–∞—á–∞                                                                |
| ---- | ------------------ | --------------------------------------------------------------------- |
| 1    | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è      | –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç, venv, `requirements.txt`, —Å—Ç—Ä—É–∫—Ç—É—Ä—É                   |
| 2    | Telegram           | –ü–æ–¥–∫–ª—é—á–∏—Ç—å Telegram-–±–æ—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∏                                     |
| 3    | FastAPI            | –ü–æ–¥–Ω—è—Ç—å `/message` —ç–Ω–¥–ø–æ–∏–Ω—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –±–æ—Ç–∞               |
| 4    | LangGraph          | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å FSM —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏                             |
| 5    | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenAI  | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∂–∞–ª–æ–± –∏ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤                     |
| 6    | –û—Ç–≤–µ—Ç              | –û—Ç–¥–∞–≤–∞—Ç—å `final_recommendation`                                       |
| 7    | –°–µ—Å—Å–∏–∏             | –•—Ä–∞–Ω–∏—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø–æ `user_id`                                |
| 8    | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –ª–æ–≥–∏–∫–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–æ—Ö–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤, –∫–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ", –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥. |
